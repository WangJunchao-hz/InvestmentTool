(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{"314d":function(e,n,o){"use strict";o.r(n);var t=o("9533");for(var i in t)"default"!==i&&function(e){o.d(n,e,(function(){return t[e]}))}(i);o("6003");var r,c,a,u,s=o("f0c5"),f=Object(s["a"])(t["default"],r,c,!1,null,null,null,!1,a,u);n["default"]=f.exports},6003:function(e,n,o){"use strict";var t=o("9d8b"),i=o.n(t);i.a},"90e9":function(e,n,o){"use strict";(function(e){o("2c9b");var n=r(o("66fd")),t=r(o("314d")),i=o("da2f");function r(e){return e&&e.__esModule?e:{default:e}}function c(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,t)}return o}function a(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?c(Object(o),!0).forEach((function(n){u(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function u(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}n.default.prototype.$evaluate=function(e){return Number((0,i.format)((0,i.evaluate)(e),{precision:16}))},n.default.config.productionTip=!1,t.default.mpType="app";var s=new n.default(a({},t.default));e(s).$mount()}).call(this,o("543d")["createApp"])},9533:function(e,n,o){"use strict";o.r(n);var t=o("b400"),i=o.n(t);for(var r in t)"default"!==r&&function(e){o.d(n,e,(function(){return t[e]}))}(r);n["default"]=i.a},"9d8b":function(e,n,o){},b400:function(e,n,o){"use strict";(function(e,t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o("44fb"),r={globalData:{userId:""},onLaunch:function(){console.log("App Launch");var n=this;e.getProvider({service:"oauth",success:function(e){n.doLogin(e.provider)},fail:function(e){console.error(e),n.doLogin(["weixin"])}})},onShow:function(){console.log("App Show")},onHide:function(){console.log("App Hide")},methods:{doLogin:function(n){var o=this;-1!==n.indexOf("weixin")&&e.checkSession({success:function(e){console.info(e),o.getUserInfo("weixin")},fail:function(n){console.error(n),e.login({provider:"weixin",success:function(e){console.info("登录成功"),o.getUserInfo("weixin",e.code)},fail:function(n){console.error("登录失败",n),e.showToast({title:"登录失败",icon:"none"})}})}})},getUserInfo:function(n,o){var i=this;o?e.request({url:"https://a66382c2-33a3-4481-ac46-85f29505c5fe.bspapp.com/http/login?code=".concat(o),success:function(o){if(o.data&&200===o.data.status&&o.data.data){var r=o.data.data;e.getStorage({key:"openid",success:function(o){o.data===r.openid?i.initApp(r.openid):e.setStorage({key:"openid",data:r.openid,success:function(){i.initApp(r.openid),e.getUserInfo({provider:n,success:function(e){t.database().collection("user").add({openid:r.openid,userInfo:e.userInfo})}})}})},fail:function(){e.setStorage({key:"openid",data:r.openid,success:function(){i.initApp(r.openid),e.getUserInfo({provider:n,success:function(e){t.database().collection("user").add({openid:r.openid,userInfo:e.userInfo})}})}})}})}},fail:function(n){console.error(n),e.showToast({title:"获取用户信息失败:"+JSON.stringify(n),icon:"none"})}}):e.getStorage({key:"openid",success:function(e){i.initApp(e.data)},fail:function(n){console.error(n),e.login({provider:"weixin",success:function(e){console.info("登录成功"),i.getUserInfo("weixin",e.code)},fail:function(n){console.error("登录失败",n),e.showToast({title:"登录失败",icon:"none"})}})}})},initApp:function(e){getApp().globalData.userId=e,i.EventBus.$emit("AppReady",e)}}};n.default=r}).call(this,o("543d")["default"],o("a9ff")["default"])}},[["90e9","common/runtime","common/vendor"]]]);